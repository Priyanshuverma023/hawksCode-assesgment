<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Psychometric Soft Skills Assessment Tool">
  <title>Soft Skills Assessment</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <link rel="stylesheet" href="css/style.css">
  <style>
    /* Google Calendar Reminder Widget */
    .gcal-reminder-section {
      margin-top: 36px;
      padding-top: 28px;
      border-top: 1.5px solid var(--border-subtle);
      width: 100%;
    }
    .gcal-reminder-header {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 16px;
    }
    .gcal-reminder-icon {
      width: 36px;
      height: 36px;
      background: linear-gradient(135deg, #4285F4 0%, #34A853 100%);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
      box-shadow: 0 4px 12px rgba(66, 133, 244, 0.25);
    }
    .gcal-reminder-title-wrap { flex: 1; min-width: 0; }
    .gcal-reminder-title {
      font-size: 13px;
      font-weight: 700;
      color: var(--text-dark);
      margin-bottom: 2px;
      font-family: 'DM Serif Display', serif;
    }
    .gcal-reminder-sub {
      font-size: 10px;
      color: var(--text-dim);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      font-weight: 600;
    }
    .gcal-reminder-body {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
    }
    .gcal-form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .gcal-form-group { display: flex; flex-direction: column; }
    .gcal-label {
      font-size: 10px;
      font-weight: 700;
      color: var(--text-dark);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 5px;
    }
    .gcal-input, .gcal-textarea {
      width: 100%;
      padding: 10px 12px;
      background: linear-gradient(135deg, #fafaf8 0%, #f5f4ed 100%);
      border: 1.5px solid var(--border-subtle);
      border-radius: 8px;
      font-family: inherit;
      font-size: 12px;
      color: var(--text-dark);
      transition: all var(--trans);
      outline: none;
      box-sizing: border-box;
    }
    .gcal-textarea { resize: vertical; min-height: 60px; }
    .gcal-input::placeholder, .gcal-textarea::placeholder { color: var(--text-dim); }
    .gcal-input:focus, .gcal-textarea:focus {
      border-color: #4285F4;
      background: #f8fbff;
      box-shadow: 0 0 0 3px rgba(66, 133, 244, 0.10);
    }
    .gcal-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      width: 100%;
      padding: 11px 16px;
      background: linear-gradient(135deg, #4285F4 0%, #1a73e8 100%);
      color: #ffffff;
      border: none;
      border-radius: 8px;
      font-family: inherit;
      font-size: 12px;
      font-weight: 700;
      cursor: pointer;
      transition: all var(--trans);
      text-transform: uppercase;
      letter-spacing: 0.04em;
      margin-top: 2px;
      box-shadow: 0 4px 14px rgba(66, 133, 244, 0.3);
    }
    .gcal-btn:hover {
      background: linear-gradient(135deg, #1a73e8 0%, #1558b0 100%);
      transform: translateY(-1px);
      box-shadow: 0 6px 18px rgba(66, 133, 244, 0.4);
    }
    .gcal-btn:active { transform: translateY(0); }
    .gcal-error {
      font-size: 10px;
      color: var(--error);
      margin-top: 3px;
      min-height: 13px;
      display: block;
    }
    .gcal-success-msg {
      display: none;
      align-items: center;
      gap: 8px;
      background: rgba(52, 168, 83, 0.10);
      border: 1.5px solid rgba(52, 168, 83, 0.3);
      border-radius: 8px;
      padding: 10px 12px;
      font-size: 11px;
      font-weight: 600;
      color: #166534;
      margin-top: 6px;
    }
    .gcal-success-msg.show { display: flex; }
  </style>
</head>
<body>
<div class="app">

  <header class="app-header">
    <div class="app-header__logo">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="#1a1a1a">
        <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
      </svg>
    </div>
    <span class="app-header__title">Soft Skills Assessment</span>
    <span class="app-header__sub">Psychometric Evaluation Tool</span>
  </header>

  <!-- WELCOME -->
  <section id="ssa-welcome" class="section">
    <div class="welcome-outer">
      <div class="welcome-grid">

        <!-- Left column -->
        <div class="welcome-left">
          <div class="welcome-hero-tag">
            <svg width="12" height="12" viewBox="0 0 12 12" fill="currentColor"><circle cx="6" cy="6" r="6"/></svg>
            Psychometric Assessment
          </div>
          <h1 class="welcome-title">
            Discover your <em>soft skill</em> strengths
          </h1>
          <p class="welcome-desc">
            This assessment uses validated psychometric questions — real workplace scenarios,
            reflective statements, and behavioural items. Answer what feels relevant, skip the rest.
          </p>

          <div class="welcome-stats">
            <div class="welcome-stat">
              <div class="welcome-stat__num" id="stat-questions">20</div>
              <div class="welcome-stat__label">Questions Per Category</div>
            </div>
            <div class="welcome-stat">
              <div class="welcome-stat__num" id="stat-categories">4</div>
              <div class="welcome-stat__label">Categories</div>
            </div>
            <div class="welcome-stat">
              <div class="welcome-stat__num">~15</div>
              <div class="welcome-stat__label">Minutes</div>
            </div>
            <div class="welcome-stat">
              <div class="welcome-stat__num">5pt</div>
              <div class="welcome-stat__label">Likert Scale</div>
            </div>
          </div>

          <div class="cat-selector-block">
            <div class="cat-selector-label">
              <span>Choose categories to assess</span>
              <span class="cat-selector-hint">Select one or more</span>
            </div>
            <div id="cat-selector-grid" class="cat-selector-grid"></div>
          </div>

          <!-- Google Calendar Reminder -->
          <div class="gcal-reminder-section">
            <div class="gcal-reminder-header">
              <div class="gcal-reminder-icon">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                  <rect x="3" y="4" width="18" height="18" rx="2" fill="white" opacity="0.9"/>
                  <path d="M16 2v4M8 2v4M3 10h18" stroke="#4285F4" stroke-width="2" stroke-linecap="round"/>
                  <rect x="7" y="14" width="3" height="3" rx="0.5" fill="#EA4335"/>
                  <rect x="10.5" y="14" width="3" height="3" rx="0.5" fill="#FBBC04"/>
                  <rect x="14" y="14" width="3" height="3" rx="0.5" fill="#34A853"/>
                </svg>
              </div>
              <div class="gcal-reminder-title-wrap">
                <div class="gcal-reminder-title">Set a Reminder</div>
                <div class="gcal-reminder-sub">Add to Google Calendar</div>
              </div>
            </div>
            <div class="gcal-reminder-body">
              <div class="gcal-form-group">
                <label class="gcal-label" for="gcal-title">Event Title</label>
                <input class="gcal-input" type="text" id="gcal-title" placeholder="e.g. Soft Skills Review Session" maxlength="120">
                <span class="gcal-error" id="gcal-err-title"></span>
              </div>
              <div class="gcal-form-group">
                <label class="gcal-label" for="gcal-desc">Notes / Description</label>
                <textarea class="gcal-textarea" id="gcal-desc" rows="2" placeholder="Preparation notes, location, agenda..."></textarea>
              </div>
              <div class="gcal-form-row">
                <div class="gcal-form-group">
                  <label class="gcal-label" for="gcal-datetime">Date &amp; Time</label>
                  <input class="gcal-input" type="datetime-local" id="gcal-datetime">
                  <span class="gcal-error" id="gcal-err-datetime"></span>
                </div>
                <div class="gcal-form-group">
                  <label class="gcal-label" for="gcal-duration">Duration (mins)</label>
                  <input class="gcal-input" type="number" id="gcal-duration" value="60" min="5" max="480" step="5">
                </div>
              </div>
              <button class="gcal-btn" onclick="addToGoogleCalendar()">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="3" y="4" width="18" height="18" rx="2"/>
                  <path d="M16 2v4M8 2v4M3 10h18"/>
                  <path d="M12 14v4M10 16h4"/>
                </svg>
                Add to Google Calendar
              </button>
              <div class="gcal-success-msg" id="gcal-success">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                Calendar opened in a new tab. Check your browser for the popup.
              </div>
            </div>
          </div>
        </div>

        <!-- Right column: form card -->
        <div class="form-card">
          <div class="form-card__title">Begin your assessment</div>
          <div class="form-card__sub">Enter your details to generate a personalised report.</div>
          <form id="ssa-form" novalidate>
            <div class="form-group">
              <label class="form-label" for="inp-name">Full Name</label>
              <input class="form-input" type="text" id="inp-name" placeholder="e.g. Sarah Mitchell" maxlength="100" autocomplete="name">
              <span class="form-error" id="err-name"></span>
            </div>
            <div class="form-group">
              <label class="form-label" for="inp-role">Job Role</label>
              <input class="form-input" type="text" id="inp-role" placeholder="e.g. Product Manager" maxlength="100" autocomplete="organization-title">
              <span class="form-error" id="err-role"></span>
            </div>
            <div class="form-group" style="display:flex;align-items:center;gap:10px;margin-bottom:20px;">
              <input type="checkbox" id="ssa-enable-timer" style="width:18px;height:18px;cursor:pointer;">
              <label for="ssa-enable-timer" style="margin:0;font-size:13px;color:var(--text-gray);cursor:pointer;font-weight:500;">Enable timer for each question (optional)</label>
            </div>
            <div class="how-it-works-box">
              <strong class="how-it-works-title">How it works</strong>
              <div class="how-it-works-body">
                Rate each statement using a 5-point scale from <em>Strongly Agree</em> to <em>Strongly Disagree</em>.
                Questions mix workplace scenarios, reflective statements, and frequency-based items.
                You can skip any question, flag for review, and change answers before submitting.
              </div>
            </div>
            <button type="submit" class="btn btn-primary btn-lg btn-full" id="ssa-start-btn">
              Start Assessment
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M13 6l6 6-6 6"/></svg>
            </button>
          </form>
        </div>

      </div>
    </div>
  </section>

  <!-- ASSESSMENT -->
  <section id="ssa-assessment" class="section">
    <div class="cat-tabs-bar">
      <div id="ssa-cat-tabs" class="cat-tabs-inner"></div>
    </div>
    <div class="q-dots-bar" id="ssa-q-dots"></div>
    <div class="q-card-wrap">
      <div class="q-card">
        <div class="q-card__meta">
          <span class="q-card__cat-badge" id="ssa-cat-label">Communication</span>
          <span class="q-card__num" id="ssa-q-num">Question 1 of 10</span>
          <div id="ssa-timer" style="font-size:11px;font-weight:700;color:#ffc62f;min-width:50px;text-align:right;">0:00</div>
        </div>
        <p class="q-card__text" id="ssa-q-text"></p>
        <div class="likert-options" id="ssa-likert"></div>
        <div class="q-actions">
          <button class="btn btn-ghost btn-sm" id="ssa-btn-prev-q">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5M11 18l-6-6 6-6"/></svg>
            Back
          </button>
          <div class="q-actions__right">
            <button class="btn btn-ghost btn-sm" id="ssa-btn-flag">
              <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-8l-4 4v-4H6a2 2 0 0 1-2-2V4z"/></svg>
              Flag
            </button>
            <button class="btn btn-ghost btn-sm" id="ssa-btn-skip">
              <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M13 6l6 6-6 6"/><line x1="19" y1="5" x2="19" y2="19"/></svg>
              Skip
            </button>
            <button class="btn btn-secondary btn-sm" id="ssa-btn-next-q">
              Next
              <svg class="btn-arrow-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M13 6l6 6-6 6"/></svg>
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="finish-early-bar">
      <div class="completion-requirement">
        <span class="completion-info" id="completion-status">Answer 50%+ to submit results</span>
      </div>
      <button class="btn btn-primary btn-sm" id="ssa-btn-finish-early">View Results</button>
    </div>
  </section>

  <!-- REVIEW -->
  <section id="ssa-review" class="section">
    <div class="review-outer">
      <div class="review-header">
        <h2>Review Your Assessment</h2>
        <p>Review your answers before final submission. You can change answers and flag questions for later review.</p>
      </div>
      <div class="review-stats-grid">
        <div class="review-stat-card">
          <div class="review-stat-badge" style="background:#86efac;color:#166534;font-size:13px;font-weight:800;">OK</div>
          <div class="review-stat-info">
            <div class="review-stat-label">Answered</div>
            <div class="review-stat-value" id="rev-answered-count">0</div>
          </div>
        </div>
        <div class="review-stat-card">
          <div class="review-stat-badge" style="background:#fbbf24;color:#78350f;font-size:20px;font-weight:800;">—</div>
          <div class="review-stat-info">
            <div class="review-stat-label">Skipped</div>
            <div class="review-stat-value" id="rev-skipped-count">0</div>
          </div>
        </div>
        <div class="review-stat-card">
          <div class="review-stat-badge" style="background:#fb923c;color:#7c2d12;font-size:20px;font-weight:800;">!</div>
          <div class="review-stat-info">
            <div class="review-stat-label">Not Answered</div>
            <div class="review-stat-value" id="rev-notanswered-count">0</div>
          </div>
        </div>
        <div class="review-stat-card">
          <div class="review-stat-badge" style="background:#60a5fa;color:#1e3a8a;">
            <svg width="17" height="17" viewBox="0 0 24 24" fill="currentColor"><path d="M4 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-8l-4 4v-4H6a2 2 0 0 1-2-2V4z"/></svg>
          </div>
          <div class="review-stat-info">
            <div class="review-stat-label">Flagged for Review</div>
            <div class="review-stat-value" id="rev-flagged-count">0</div>
          </div>
        </div>
      </div>
      <div class="review-summary-section">
        <h3>Category Breakdown</h3>
        <div id="rev-summary-cards" class="review-cat-grid"></div>
      </div>
      <div class="review-actions">
        <button class="btn btn-ghost btn-sm" id="rev-btn-back">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5M11 18l-6-6 6-6"/></svg>
          Back to Assessment
        </button>
        <button class="btn btn-secondary btn-sm" id="rev-btn-review-flagged">
          <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-8l-4 4v-4H6a2 2 0 0 1-2-2V4z"/></svg>
          Review Flagged
        </button>
        <button class="btn btn-primary btn-sm" id="rev-btn-submit">
          Submit &amp; View Results
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14M13 6l6 6-6 6"/></svg>
        </button>
      </div>
    </div>
  </section>

  <!-- RESULTS -->
  <section id="ssa-results" class="section">
    <div class="results-wrap">
      <div class="res-header">
        <div class="res-header__left">
          <h1>Assessment Results</h1>
          <p>
            <span id="res-name" style="font-weight:600;color:#1a1a1a;"></span>
            &nbsp;·&nbsp;
            <span id="res-role" style="color:#5a5a5a;"></span>
            &nbsp;·&nbsp;
            <span id="res-date" style="color:#8a8a8a;font-size:13px;"></span>
          </p>
        </div>
        <div class="res-actions">
          <button class="btn btn-secondary btn-sm" id="res-btn-restart">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
            New Assessment
          </button>
          <button class="btn btn-primary btn-sm" id="res-btn-pdf">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
            Export PDF
          </button>
        </div>
      </div>
      <div class="res-overall">
        <div class="res-overall__circle" id="res-overall-circle">
          <div class="res-overall__circle-inner">
            <span class="res-overall__pct" id="res-overall-pct">—</span>
          </div>
        </div>
        <div class="res-overall__info">
          <h2>Overall Performance</h2>
          <div class="res-overall__level" id="res-overall-level">—</div>
          <p class="res-overall__desc">Based on your responses across all assessed categories. Skipped questions are excluded from scoring.</p>
        </div>
      </div>
      <div class="res-cat-grid" id="res-cat-cards"></div>
      <div class="res-charts">
        <div class="chart-card">
          <div class="chart-card__title">Competency Radar</div>
          <canvas id="chart-radar" width="340" height="300"></canvas>
        </div>
        <div class="chart-card">
          <div class="chart-card__title">Category Scores</div>
          <canvas id="chart-bar" width="340" height="300"></canvas>
        </div>
        <div class="chart-card chart-card--full">
          <div class="chart-card__title">Response Distribution (all answered questions)</div>
          <canvas id="chart-dist" width="700" height="220"></canvas>
        </div>
      </div>
    </div>
  </section>

  <footer class="app-footer">
    <span>Soft Skills Assessment Tool</span>
  </footer>

</div>

<div id="ssa-toast" class="ssa-toast" role="status" aria-live="polite"></div>

<script src="js/app.js" defer></script>

<script>
  (function setDefaultDateTime() {
    const inp = document.getElementById('gcal-datetime');
    if (!inp) return;
    const d = new Date(Date.now() + 60 * 60 * 1000);
    const pad = n => n.toString().padStart(2, '0');
    inp.value =
      d.getFullYear() + '-' + pad(d.getMonth() + 1) + '-' + pad(d.getDate()) +
      'T' + pad(d.getHours()) + ':' + pad(d.getMinutes());
  })();

  function addToGoogleCalendar() {
    const title    = document.getElementById('gcal-title').value.trim();
    const desc     = document.getElementById('gcal-desc').value.trim();
    const datetime = document.getElementById('gcal-datetime').value;
    const duration = parseInt(document.getElementById('gcal-duration').value, 10) || 60;

    document.getElementById('gcal-err-title').textContent    = '';
    document.getElementById('gcal-err-datetime').textContent = '';
    document.getElementById('gcal-success').classList.remove('show');

    let valid = true;
    if (!title || title.length < 2) {
      document.getElementById('gcal-err-title').textContent = 'Please enter an event title.';
      valid = false;
    }
    if (!datetime) {
      document.getElementById('gcal-err-datetime').textContent = 'Please choose a date and time.';
      valid = false;
    }
    if (!valid) return;

    function formatGCal(date) {
      const pad = n => n.toString().padStart(2, '0');
      return date.getFullYear() + pad(date.getMonth() + 1) + pad(date.getDate()) +
             'T' + pad(date.getHours()) + pad(date.getMinutes()) + pad(date.getSeconds());
    }

    const startDate = new Date(datetime);
    const endDate   = new Date(startDate.getTime() + duration * 60 * 1000);

    const url =
      'https://calendar.google.com/calendar/render?action=TEMPLATE' +
      '&text='    + encodeURIComponent(title) +
      '&details=' + encodeURIComponent(desc || 'Scheduled via Soft Skills Assessment Tool') +
      '&dates='   + formatGCal(startDate) + '/' + formatGCal(endDate);

    window.open(url, '_blank');

    document.getElementById('gcal-success').classList.add('show');
    setTimeout(() => document.getElementById('gcal-success').classList.remove('show'), 5000);
  }
</script>
</body>
</html>